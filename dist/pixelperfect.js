(function(){var e=function(e,t,n){var r,i,s,o;if(!e)return this.elements=[],this.elements_length=0,this;if(e.nodeName)return this.elements=[e],this.elements_length=1,this;typeof t=="boolean"&&(n=t,t=undefined),n===undefined&&(n=!0);if(n&&this.elements===null){r=[],t===undefined&&(t=document),i=t.querySelectorAll(e),s=i.length;for(o=0;o<s;o++)r.push(i[o]);this.elements=r,this.elements_length=r.length}return this};e.prototype={elements:null,elements_length:0,event:function(t,n){var r;return this.elements.every(function(r){return r.addEventListener(t,n.bind(new e(r))),r.events===undefined&&(r.events={}),r.events[t]=n,!0}),this},remove:function(){return this.elements.every(function(e){return e.parentNode.removeChild(e),!0}),this},removeClass:function(e){return this.elements.every(function(t){return t.className=t.className.replace(RegExp(e,"g"),"").replace(/^\s+|\s+$/,""),!0}.bind(this)),this},addClass:function(e){return this.removeClass(e),this.elements.every(function(t){return t.className+=" "+e,!0}.bind(this)),this},setOpacity:function(e){return this.elements.every(function(t){return t.style.opacity=(parseInt(e,10)/100).toString(),!0}.bind(this)),this}},DragAndDrop={makeDraggable:function(e,t){var n;t===undefined&&(t={}),t={handler:t.handler===undefined?!1:t.handler,remember:t.remember===undefined?!0:t.remember,onDrag:t.onDrag===undefined?function(){}:t.onDrag,onDrop:t.onDrop===undefined?function(){}:t.onDrop,onMove:t.onMove===undefined?function(){}:t.onMove};for(n=0;n<e.elements_length;n++)t.handler?(t.handler=e.elements[n].querySelector(t.handler),t.handler||(t.handler=e.elements[n])):t.handler=e.elements[n],e.elements[n].options=t,t.handler.addEventListener("mousedown",function(e){e.preventDefault(),document.currentDragged=this,document.currentDragged.mouseDiffX=e.pageX-this.offsetLeft,document.currentDragged.mouseDiffY=e.pageY-this.offsetTop,this.options.onDrag.call(this,e)}.bind(e.elements[n]))},init:function(){var e,t,n;document.addEventListener("mouseup",function(e){this.currentDragged&&(this.currentDragged.options.remember&&localStorage.setItem("pixelperfect:draganddrop:"+this.currentDragged.getAttribute("id"),parseInt(this.currentDragged.style.left,10).toString()+","+parseInt(this.currentDragged.style.top,10).toString()),this.currentDragged.options.onDrop.call(this.currentDragged,e)),this.currentDragged=!1}),document.addEventListener("mousemove",function(e){this.currentDragged&&(this.currentDragged.style.right="auto",this.currentDragged.style.bottom="auto",this.currentDragged.style.left=(e.pageX-this.currentDragged.mouseDiffX).toString()+"px",this.currentDragged.style.top=(e.pageY-this.currentDragged.mouseDiffY).toString()+"px",this.currentDragged.options.onMove.call(this.currentDragged,e))});for(e in localStorage)e.match(/pixelperfect:draganddrop/)&&localStorage.hasOwnProperty(e)&&(t=document.getElementById(e.replace("pixelperfect:draganddrop:","")),n=localStorage.getItem(e).split(","),t.style.left=n[0]+"px",t.style.top=n[1]+"px")}};var t={insertLayer:function(e,t){var n=document.createElement("div"),r=document.createElement("a"),i=new Image,s=document.createElement("canvas"),o=s.getContext("2d");n.className="pixelperfect-layer",r.className="pixelperfect-button",r.innerHTML="&#10008;",n.appendChild(i),n.appendChild(r),e.match(/^blob:/)?i.onload=function(){var e,t;e=i.src.replace("blob:",""),t="pixelperfect:layer:"+e,s.width=i.width,s.height=i.height,o.drawImage(i,0,0),localStorage.setItem(t,s.toDataURL("image/jpeg")),n.setAttribute("data-id",t),URL.revokeObjectURL(e),this.appendLayer(n),this.selectLayer(this.fillSelected())}.bind(this):(t!==undefined&&n.setAttribute("data-id",t),this.appendLayer(n),this.selectLayer(this.fillSelected())),i.src=e},appendLayer:function(e){$("#pixelperfect-layers").elements[0].appendChild(e)},selectLayer:function(e){var t,r=localStorage.getItem("pixelperfect:selected");if(e==r)return;e===undefined&&(e=this.fillSelected()),e&&($("#pixelperfect-layers .pixelperfect-layer").removeClass("pixelperfect-layer-selected"),$('#pixelperfect-layers .pixelperfect-layer[data-id="'+e+'"]').addClass("pixelperfect-layer-selected"),localStorage.setItem("pixelperfect:selected",e),n.refreshOverlay(e))},removeLayer:function(e){$('#pixelperfect-layers .pixelperfect-layer[data-id="'+e+'"]').remove(),localStorage.removeItem(e),this.selectLayer(this.fillSelected())},fillSelected:function(){var e,t=localStorage.getItem("pixelperfect:selected");if(!t||!localStorage.getItem(t))for(e in localStorage)if(e.match(/^pixelperfect:layer/)&&localStorage.hasOwnProperty(e)){t=e;break}return t},refresh:function(){var e;$("#pixelperfect-layers .pixelperfect-layer").remove();for(e in localStorage)e.match(/^pixelperfect:layer/)&&localStorage.hasOwnProperty(e)&&this.insertLayer(localStorage.getItem(e),e);this.selectLayer()},init:function(){this.refresh(),$("#pixelperfect-layers").event("click",function(e){var n;e.preventDefault(),e.target.className.match("pixelperfect-button")?t.removeLayer.call(t,e.target.parentNode.getAttribute("data-id")):((n=e.target.getAttribute("data-id"))||(n=e.target.parentNode.getAttribute("data-id")))&&t.selectLayer(n)})}},n={STYLES:"I3BpeGVscGVyZmVjdHt3aWR0aDoyMDBweDtwYWRkaW5nOjEwcHg7cG9zaXRpb246Zml4ZWQ7cmlnaHQ6MjBweDt0b3A6MjBweDtjdXJzb3I6ZGVmYXVsdDstbW96LWJvcmRlci1yYWRpdXM6OHB4Oy13ZWJraXQtYm9yZGVyLXJhZGl1czo4cHg7LW8tYm9yZGVyLXJhZGl1czo4cHg7LW1zLWJvcmRlci1yYWRpdXM6OHB4O2JvcmRlci1yYWRpdXM6OHB4Oy1tb3otYm94LXNoYWRvdzowIDAgN3B4IHJnYmEoMCwwLDAsMC42KTstd2Via2l0LWJveC1zaGFkb3c6MCAwIDdweCByZ2JhKDAsMCwwLDAuNik7LW8tYm94LXNoYWRvdzowIDAgN3B4IHJnYmEoMCwwLDAsMC42KTstbXMtYm94LXNoYWRvdzowIDAgN3B4IHJnYmEoMCwwLDAsMC42KTtib3gtc2hhZG93OjAgMCA3cHggcmdiYSgwLDAsMCwwLjYpO3otaW5kZXg6MjE0NzQ4MzY0NztiYWNrZ3JvdW5kOiNmZmZ9I3BpeGVscGVyZmVjdCAqe2ZvbnQtZmFtaWx5OkFyaWFsLEhlbHZldGljYSxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxMnB4O3RleHQtZGVjb3JhdGlvbjpub25lfSNwaXhlbHBlcmZlY3QgI3BpeGVscGVyZmVjdC1jb250ZW50PmRpdntvdmVyZmxvdzpoaWRkZW47aGVpZ2h0OjIwcHg7bGluZS1oZWlnaHQ6MjBweDtwYWRkaW5nOjVweCAwfSNwaXhlbHBlcmZlY3QgLnBpeGVscGVyZmVjdC1sYWJlbHt3aWR0aDo1NXB4O3BhZGRpbmctcmlnaHQ6NXB4O3RleHQtYWxpZ246cmlnaHQ7ZGlzcGxheTpibG9jaztmbG9hdDpsZWZ0O2ZvbnQtd2VpZ2h0OmJvbGR9I3BpeGVscGVyZmVjdCBpbnB1dFt0eXBlPSJ0ZXh0Il17d2lkdGg6MzVweDtoZWlnaHQ6MTRweDtwYWRkaW5nOjJweDtib3JkZXI6MXB4IHNvbGlkICNjMGMwYzA7LW1vei1ib3JkZXItcmFkaXVzOjNweDstd2Via2l0LWJvcmRlci1yYWRpdXM6M3B4Oy1vLWJvcmRlci1yYWRpdXM6M3B4Oy1tcy1ib3JkZXItcmFkaXVzOjNweDtib3JkZXItcmFkaXVzOjNweH0jcGl4ZWxwZXJmZWN0IC5waXhlbHBlcmZlY3QtYnV0dG9ue3dpZHRoOjIwcHg7aGVpZ2h0OjIwcHg7ZGlzcGxheTpibG9jaztmbG9hdDpyaWdodDttYXJnaW4tbGVmdDo0cHg7Y29sb3I6I2ZmZjt0ZXh0LWFsaWduOmNlbnRlcjtsaW5lLWhlaWdodDoyMHB4Oy1tb3otYm9yZGVyLXJhZGl1czo0cHg7LXdlYmtpdC1ib3JkZXItcmFkaXVzOjRweDstby1ib3JkZXItcmFkaXVzOjRweDstbXMtYm9yZGVyLXJhZGl1czo0cHg7Ym9yZGVyLXJhZGl1czo0cHg7Zm9udC1zaXplOjE2cHg7Y3Vyc29yOnBvaW50ZXJ9I3BpeGVscGVyZmVjdCAucGl4ZWxwZXJmZWN0LWJ1dHRvbjpob3ZlcntvcGFjaXR5Oi44fSNwaXhlbHBlcmZlY3QgLnBpeGVscGVyZmVjdC1idXR0b24sI3BpeGVscGVyZmVjdCAucGl4ZWxwZXJmZWN0LXJhbmdle2JhY2tncm91bmQ6I2I2YjZiNiB1cmwoZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGRoQVFBVUFJUVVBS0tpb3FXbHBhZW5wNnFxcXF5c3JLK3ZyN0d4c2JTMHRMYTJ0cm01dWJ1N3U3Nit2c0RBd01QRHc4WEZ4Y2pJeU1yS3lzM056Yy9QejlMUzB2Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy95d0FBQUFBQVFBVUFBQUZFZUFrUmREak5NeWlKTWhoRk1RZ0JFQUlBRHM9KSByZXBlYXQteCBjZW50ZXIgY2VudGVyfSNwaXhlbHBlcmZlY3QgI3BpeGVscGVyZmVjdC10b3B7bWFyZ2luOi0xMHB4IC0xMHB4IDA7cGFkZGluZzoxMHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNkYWRhZGE7bGluZS1oZWlnaHQ6MjBweDtjdXJzb3I6bW92ZX0jcGl4ZWxwZXJmZWN0ICNwaXhlbHBlcmZlY3QtbGFuZy15e21hcmdpbi1sZWZ0OjEwcHh9I3BpeGVscGVyZmVjdCAjcGl4ZWxwZXJmZWN0LXZlcnRpY2FsLXRvcHtsaW5lLWhlaWdodDo2cHh9I3BpeGVscGVyZmVjdCAjcGl4ZWxwZXJmZWN0LXZlcnRpY2FsLWJvdHRvbXtsaW5lLWhlaWdodDozMHB4fSNwaXhlbHBlcmZlY3QgI3BpeGVscGVyZmVjdC1ob3Jpem9udGFsLWxlZnR7bWFyZ2luLWxlZnQ6MH0jcGl4ZWxwZXJmZWN0ICNwaXhlbHBlcmZlY3Qtb3BhY2l0eS1yYW5nZXt3aWR0aDo5MHB4O2hlaWdodDoyMHB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTttYXJnaW4tbGVmdDo1cHh9I3BpeGVscGVyZmVjdCAjcGl4ZWxwZXJmZWN0LW9wYWNpdHktcmFuZ2UucGl4ZWxwZXJmZWN0LXJhbmdle2hlaWdodDo2cHg7cG9zaXRpb246cmVsYXRpdmU7bWFyZ2luOjdweCBpbmhlcml0O2Rpc3BsYXk6aW5saW5lLWJsb2NrfSNwaXhlbHBlcmZlY3QgI3BpeGVscGVyZmVjdC1vcGFjaXR5LXJhbmdlLnBpeGVscGVyZmVjdC1yYW5nZSAucGl4ZWxwZXJmZWN0LXNsaWRlcntkaXNwbGF5OmJsb2NrO3dpZHRoOjE0cHg7aGVpZ2h0OjE0cHg7LW1vei1ib3JkZXItcmFkdXM6N3B4Oy13ZWJraXQtYm9yZGVyLXJhZGl1czo3cHg7LW8tYm9yZGVyLXJhZGl1czo3cHg7LW1zLWJvcmRlci1yYWRpdXM6N3B4O2JvcmRlci1yYWRpdXM6N3B4O2JhY2tncm91bmQ6I2NjYztwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTRweDtsZWZ0OjUwJTttYXJnaW4tbGVmdDotN3B4O2N1cnNvcjptb3ZlfSNwaXhlbHBlcmZlY3QgI3BpeGVscGVyZmVjdC1jb250ZW50ICNwaXhlbHBlcmZlY3QtYWRkbGF5ZXJ7Ym9yZGVyLXRvcDoxcHggc29saWQgI2RhZGFkYTtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZGFkYWRhO21hcmdpbjowIC0xMHB4O3BhZGRpbmc6NXB4IDEwcHh9I3BpeGVscGVyZmVjdCAjcGl4ZWxwZXJmZWN0LWNvbnRlbnQgI3BpeGVscGVyZmVjdC1hZGRsYXllciAjcGl4ZWxwZXJmZWN0LWZpbGV7d2lkdGg6MTEwcHh9I3BpeGVscGVyZmVjdCAjcGl4ZWxwZXJmZWN0LWNvbnRlbnQgI3BpeGVscGVyZmVjdC1hZGRsYXllciAjcGl4ZWxwZXJmZWN0LWZpbGVpbnB1dHtkaXNwbGF5Om5vbmV9I3BpeGVscGVyZmVjdCAjcGl4ZWxwZXJmZWN0LWNvbnRlbnQgI3BpeGVscGVyZmVjdC1sYXllcnN7aGVpZ2h0OmF1dG99I3BpeGVscGVyZmVjdCAjcGl4ZWxwZXJmZWN0LWNvbnRlbnQgI3BpeGVscGVyZmVjdC1sYXllcnMgLnBpeGVscGVyZmVjdC1sYXllcnttYXgtaGVpZ2h0OjEyMHB4O3BhZGRpbmc6NXB4IDMwcHggNXB4IDVweDstbW96LWJvcmRlci1yYWRpdXM6MTBweDstd2Via2l0LWJvcmRlci1yYWRpdXM6MTBweDstby1ib3JkZXItcmFkaXVzOjEwcHg7LW1zLWJvcmRlci1yYWRpdXM6MTBweDtib3JkZXItcmFkaXVzOjEwcHg7b3ZlcmZsb3c6YXV0bztwb3NpdGlvbjpyZWxhdGl2ZTt0ZXh0LWFsaWduOmNlbnRlcjtiYWNrZ3JvdW5kOiNmZmY7bWFyZ2luLWJvdHRvbTo1cHh9I3BpeGVscGVyZmVjdCAjcGl4ZWxwZXJmZWN0LWNvbnRlbnQgI3BpeGVscGVyZmVjdC1sYXllcnMgLnBpeGVscGVyZmVjdC1sYXllciwjcGl4ZWxwZXJmZWN0ICNwaXhlbHBlcmZlY3QtY29udGVudCAjcGl4ZWxwZXJmZWN0LWxheWVycyAucGl4ZWxwZXJmZWN0LWxheWVyIGltZ3ttYXgtd2lkdGg6MTY1cHg7bWF4LWhlaWdodDoxMjBweDt2ZXJ0aWNhbC1hbGlnbjp0b3B9I3BpeGVscGVyZmVjdCAjcGl4ZWxwZXJmZWN0LWNvbnRlbnQgI3BpeGVscGVyZmVjdC1sYXllcnMgLnBpeGVscGVyZmVjdC1sYXllci1zZWxlY3RlZHtiYWNrZ3JvdW5kOiNlZGVmZjR9I3BpeGVscGVyZmVjdCAjcGl4ZWxwZXJmZWN0LWNvbnRlbnQgI3BpeGVscGVyZmVjdC1sYXllcnMgLnBpeGVscGVyZmVjdC1idXR0b257cG9zaXRpb246YWJzb2x1dGU7dG9wOjVweDtyaWdodDo1cHh9I3BpeGVscGVyZmVjdC1vdmVybGF5e3Bvc2l0aW9uOmFic29sdXRlO2N1cnNvcjptb3ZlfQ==",HTML:'<div id="pixelperfect-top"><span id="pixelperfect-lang-product-name">PixelPerfect</span><a href="#" class="pixelperfect-button" id="pixelperfect-hidden">&#10008;</a><a href="#" class="pixelperfect-button" id="pixelperfect-minimized">&#10134;</a><a href="#" class="pixelperfect-button" id="pixelperfect-active">&#9899;</a></div><div id="pixelperfect-content"><div><span id="pixelperfect-lang-overlay" class="pixelperfect-label">Overlay</span><label for="pixelperfect-overlay-over"><input type="radio" name="pixelperfect-overlay" id="pixelperfect-overlay-over" />&nbsp;<span id="pixelperfect-lang-overlay-over">Over</span></label><label for="pixelperfect-overlay-below"><input type="radio" name="pixelperfect-overlay" id="pixelperfect-overlay-below" />&nbsp;<span id="pixelperfect-lang-overlay-below">Below</span></label></div><div><label for="pixelperfect-opacity"><span id="pixelperfect-lang-opacity" class="pixelperfect-label">Opacity</span></label><input type="text" id="pixelperfect-opacity" /><input type="range" min="0" max="100" step="1" id="pixelperfect-opacity-range" /></div><div><span id="pixelperfect-lang-position" class="pixelperfect-label">Position</span><label for="pixelperfect-x"><span id="pixelperfect-lang-x">X</span>:&nbsp;<input type="text" id="pixelperfect-x" /></label><label for="pixelperfect-y"><span id="pixelperfect-lang-y">Y</span>:&nbsp;<input type="text" id="pixelperfect-y" /></label></div><div id="pixelperfect-aligns"><span id="pixelperfect-lang-align" class="pixelperfect-label">Align</span><a href="#" class="pixelperfect-button" id="pixelperfect-vertical-bottom">&#9531;</a><a href="#" class="pixelperfect-button" id="pixelperfect-vertical-middle">&#9472;</a><a href="#" class="pixelperfect-button" id="pixelperfect-vertical-top">&#9523;</a><a href="#" class="pixelperfect-button" id="pixelperfect-horizontal-right">&#9515;</a><a href="#" class="pixelperfect-button" id="pixelperfect-horizontal-center">&#9475;</a><a href="#" class="pixelperfect-button" id="pixelperfect-horizontal-left">&#9507;</a></div><div id="pixelperfect-addlayer"><span id="pixelperfect-lang-file" class="pixelperfect-label"><label for="pixelperfect-file">File</label></span><input type="text" id="pixelperfect-file" /><input type="file" id="pixelperfect-fileinput" accept="image/*" /><a href="#" class="pixelperfect-button" id="pixelperfect-upload-file">&#8683;</a></div><div id="pixelperfect-layers"></div></div>',DEFAULTS:{overlay:"below",opacity:"50",position:{x:0,y:0},minimized:!1,hidden:!1,active:!0},options:{overlay:!1,opacity:!1,position:!1,align:!1,minimized:!1,hidden:!1,active:!1},layers:[],wrapper:null,refreshOverlay:function(e){var t;e!==undefined?($("#pixelperfect-overlay").remove(),t=new Image,t.src=localStorage.getItem(e),t.setAttribute("id","pixelperfect-overlay"),document.body.appendChild(t),DragAndDrop.makeDraggable($(t),{remember:!1,onDrop:function(){n.options.position.x=parseInt(this.style.left,10),n.options.position.y=parseInt(this.style.top,10),n.refreshInterface.call(n)}})):t=document.getElementById("pixelperfect-overlay");if(!t)return!1;this.options.overlay=="below"?($(this.wrapper).setOpacity(this.options.opacity),$(t).setOpacity(100),t.style.zIndex="-2147483646"):($(this.wrapper).setOpacity(100),$(t).setOpacity(this.options.opacity),t.style.zIndex="2147483646"),t.style.left=this.options.position.x+"px",t.style.top=this.options.position.y+"px",this.updateOptions()},refreshInterface:function(){this.options.minimized?document.getElementById("pixelperfect-content").style.display="block":document.getElementById("pixelperfect-content").style.display="none",document.getElementById("pixelperfect-overlay")&&(this.options.active?(document.getElementById("pixelperfect-overlay").style.display="block",this.refreshOverlay()):(document.getElementById("pixelperfect-overlay").style.display="none",$("body > .pixelperfect-wrapper").setOpacity(100))),this.updateOptions(),this.storeOptions()},updateOptions:function(){document.getElementById("pixelperfect-overlay-"+this.options.overlay).checked=!0,document.getElementById("pixelperfect-opacity").value=this.options.opacity,document.getElementById("pixelperfect-opacity-range").value=this.options.opacity,document.getElementById("pixelperfect-x").value=this.options.position.x,document.getElementById("pixelperfect-y").value=this.options.position.y},applyOptions:function(){this.options.overlay=document.getElementById("pixelperfect-overlay-over").checked?"over":"below",this.options.opacity=document.getElementById("pixelperfect-opacity").value,this.options.position.x=(parseInt(document.getElementById("pixelperfect-x").value,10)||0).toString(),this.options.position.y=(parseInt(document.getElementById("pixelperfect-y").value,10)||0).toString()},storeOptions:function(){var e;for(e in this.options)this.options.hasOwnProperty(e)&&(e=="position"?localStorage.setItem("pixelperfect:options:"+e,this.options[e].x+","+this.options[e].y):localStorage.setItem("pixelperfect:options:"+e,this.options[e]))},setDefaults:function(){var e;for(e in this.DEFAULTS)this.DEFAULTS.hasOwnProperty(e)&&!localStorage.getItem("pixelperfect:options:"+e)&&(e=="position"?localStorage.setItem("pixelperfect:options:"+e,this.DEFAULTS[e].x+","+this.DEFAULTS[e].y):localStorage.setItem("pixelperfect:options:"+e,this.DEFAULTS[e]))},initOptions:function(){var e,t;for(e in this.options)this.options.hasOwnProperty(e)&&(e=="position"?(t=localStorage.getItem("pixelperfect:options:"+e).split(","),this.options[e]={},this.options[e].x=t[0],this.options[e].y=t[1]):e=="active"||e=="minimized"||e=="hidden"?this.options[e]=localStorage.getItem("pixelperfect:options:"+e)==="true":this.options[e]=localStorage.getItem("pixelperfect:options:"+e))},initFileHandling:function(){$("#pixelperfect-upload-file").event("click",function(e){e.preventDefault(),document.getElementById("pixelperfect-fileinput").click()}),$("#pixelperfect-fileinput").event("change",function(e){t.insertLayer(window.URL.createObjectURL(e.target.files[0]))}.bind(this))},initWrapper:function(){var e=document.createElement("div"),t=document.defaultView.getComputedStyle(document.body),n=document.body.attributes,r=document.defaultView.getComputedStyle(e),i,s,o;for(i in n)n.hasOwnProperty(i)&&e.setAttribute(n[i].name,n[i].value);for(i in t)!i.match(/^[0-9]/)&&r[i]!=t[i]&&(s=r[i],e.style[i]=t[i],document.body.style[i]=s);e.className=document.body.className+" pixelperfect-wrapper",e.style.overflow="hidden",e.style.position="relative",e.style.margin="0",$("body > *").elements.every(function(t){return e.appendChild(t),!0}),document.body.appendChild(e),this.wrapper=e,o=function(){this.wrapper.style.minHeight=window.innerHeight.toString()+"px"}.bind(this),o(),window.addEventListener("resize",o)},initHTML:function(){var e=document.createElement("div");e.setAttribute("id","pixelperfect"),e.innerHTML=this.HTML,document.body.appendChild(e)},initStyles:function(){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("media","all"),e.setAttribute("href","data:text/css;base64,"+this.STYLES),document.head.appendChild(e)},initInterfaceEvents:function(){$("#pixelperfect-overlay-over, #pixelperfect-overlay-below, #pixelperfect-opacity, #pixelperfect-x, #pixelperfect-y").event("change",function(){document.getElementById("pixelperfect-opacity-range").value=document.getElementById("pixelperfect-opacity").value,this.applyOptions.call(this),this.storeOptions.call(this),this.refreshOverlay.call(this)}.bind(this)),$("#pixelperfect-aligns > .pixelperfect-button").event("click",function(e){var t=!1,r=!1,i=document.getElementById("pixelperfect-overlay");e.preventDefault();switch(this.elements[0].getAttribute("id")){case"pixelperfect-horizontal-left":t=0;break;case"pixelperfect-horizontal-center":t=Math.round(window.innerWidth/2-i.width/2);break;case"pixelperfect-horizontal-right":t=window.innerWidth-i.width;break;case"pixelperfect-vertical-top":r=0;break;case"pixelperfect-vertical-middle":r=Math.round(window.innerHeight/2-i.height/2);break;case"pixelperfect-vertical-bottom":r=window.innerHeight-i.height}t!==!1&&(document.getElementById("pixelperfect-x").value=t),r!==!1&&(document.getElementById("pixelperfect-y").value=r),n.applyOptions(),n.storeOptions(),n.refreshOverlay()}),$("#pixelperfect-top > .pixelperfect-button").event("click",function(e){var t=this.elements[0].getAttribute("id").replace("pixelperfect-","");e.preventDefault(),n.options[t]=!n.options[t],n.refreshInterface()}),$("#pixelperfect-opacity-range").event("change",function(){document.getElementById("pixelperfect-opacity").value=this.elements[0].value,n.applyOptions(),n.refreshInterface()})},init:function(){this.setDefaults(),this.initOptions(),this.initWrapper(),this.initHTML(),this.initStyles(),this.initInterfaceEvents(),DragAndDrop.init(),DragAndDrop.makeDraggable($("#pixelperfect"),{handler:"#pixelperfect-top"}),t.init(),this.initFileHandling(),this.refreshInterface()}},r={pre_windowURL:function(){window.URL||!window.webkitURL||(window.URL=window.webkitURL)},post_opacityRange:function(){var e=document.createElement("input"),t,n,r;e.setAttribute("type","range"),e.type!=="range"&&(t=document.getElementById("pixelperfect-opacity-range"),e=document.createElement("span"),n=document.createElement("span"),e.className="pixelperfect-range",n.className="pixelperfect-slider",e.appendChild(n),e.value=t.value,e.events=t.events,t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t),e.setAttribute("id","pixelperfect-opacity-range"),r=function(e){var t=document.getElementById("pixelperfect-opacity-range"),n=document.getElementById("pixelperfect");e.preventDefault(),e.stopPropagation(),t.value=Math.round(Math.max(0,Math.min(100,(e.pageX-t.offsetLeft-n.offsetLeft-10)/t.clientWidth*100+10))),this.style.top="-4px",this.style.left=t.value.toString()+"%",t.elements=[t],t.events.change.call(t)}.bind(n),$(e).event("click",r),DragAndDrop.makeDraggable($(n),{remember:!1,onMove:r}),setInterval(function(){this.firstChild.style.left=this.value+"%"}.bind(document.getElementById("pixelperfect-opacity-range")),50))},preLoad:function(){var e;for(e in this)e!="preLoad"&&e.match(/^pre_/)&&this.hasOwnProperty(e)&&this[e]()},postLoad:function(){var e;for(e in this)e!="postLoad"&&e.match(/^post_/)&&this.hasOwnProperty(e)&&this[e]()}};$=function(t,n,r){return new e(t,n,r)},window.$=$,window.onload=function(){r.preLoad(),n.init(),r.postLoad()}})();